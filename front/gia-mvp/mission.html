<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIA - Misi√≥n: Bienvenido a GIA</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3B82F6">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Open Sans', sans-serif; }
        #imagePreview {
            display: none;
            max-width: 100%;
            border-radius: 1rem;
            margin-top: 1rem;
        }
    </style>
</head>
<body class="bg-white min-h-screen">
    <!-- Header -->
    <div class="text-white p-6 rounded-b-3xl shadow-lg" style="background:#009639">
        <div class="max-w-md mx-auto">
            <button onclick="window.location.href='dashboard.html'" class="text-white mb-4 flex items-center gap-2 font-semibold hover:opacity-80">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                <span>Volver</span>
            </button>
            
            <div class="flex items-center gap-4">
                <div class="w-16 h-16 bg-white bg-opacity-30 rounded-2xl flex items-center justify-center">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7h4l2-2h6l2 2h4v12H3z"/></svg>
                </div>
                <div>
                    <h1 class="text-2xl font-extrabold">Misi√≥n 1</h1>
                    <p class="text-orange-100">Bienvenido a GIA</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenido -->
    <div class="max-w-md mx-auto p-6">
        <!-- Descripci√≥n -->
        <div class="bg-white rounded-2xl shadow-md p-6 mb-6">
            <h2 class="text-xl font-extrabold text-gray-800 mb-3">üéØ ¬øQu√© vas a aprender?</h2>
            <ul class="space-y-2 text-gray-700">
                <li class="flex items-start gap-2">
                    <span class="text-green-500 font-bold">‚úì</span>
                    <span>Qu√© es GIA y c√≥mo te ayudar√° en tu emprendimiento</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-green-500 font-bold">‚úì</span>
                    <span>Los 3 pilares del programa: finanzas, modelo de negocio y h√°bitos</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-green-500 font-bold">‚úì</span>
                    <span>C√≥mo aprovechar al m√°ximo cada misi√≥n</span>
                </li>
            </ul>
        </div>

        <!-- Recompensa -->
        <div class="bg-gray-50 rounded-2xl p-5 mb-6 border-2 border-gray-200 text-center">
            <p class="font-bold text-gray-800 mb-2">üèÜ Recompensa al completar</p>
            <div class="flex items-center justify-center gap-4">
                <div class="bg-white rounded-xl px-4 py-2 shadow-md">
                    <p class="text-2xl font-extrabold" style="color:#009639">+100</p>
                    <p class="text-xs text-gray-600">Puntos</p>
                </div>
                <div class="bg-white rounded-xl px-4 py-2 shadow-md">
                    <svg class="w-7 h-7 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7h4l2-2h6l2 2h4v12H3z"/></svg>
                    <p class="text-xs text-gray-600 font-bold">Fot√≥grafo</p>
                </div>
            </div>
        </div>

        <!-- Paso 1: Ver tutorial -->
        <div class="bg-white rounded-2xl shadow-md p-6 mb-6">
            <div class="flex items-center gap-3 mb-4">
                <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold">1</div>
                <h3 class="text-lg font-extrabold text-gray-800">Mira el tutorial</h3>
            </div>
            
            <p class="text-gray-600 mb-4">
                En este video de 2 minutos conocer√°s GIA y c√≥mo sacarle el m√°ximo provecho:
            </p>

            <!-- Bot√≥n a TikTok (simulado) -->
            <a 
                href="https://www.tiktok.com/@emprendedoresbolivia" 
                target="_blank"
                class="block w-full text-white font-bold text-lg py-4 px-6 rounded-2xl shadow-lg transform hover:scale-105 transition-all text-center"
                style="background:#009639">
                <div class="flex items-center justify-center gap-3">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/></svg>
                    <span>Ver tutorial en TikTok</span>
                </div>
            </a>

            <p class="text-xs text-gray-500 text-center mt-2">
                El video se abre en otra app (no consume tus datos)
            </p>
        </div>

        <!-- Paso 2: Sube tu foto -->
        <div class="bg-white rounded-2xl shadow-md p-6">
            <div class="flex items-center gap-3 mb-4">
                <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold">2</div>
                <h3 class="text-lg font-extrabold text-gray-800">Pon en pr√°ctica</h3>
            </div>
            
            <p class="text-gray-600 mb-4">
                ¬øYa viste el video? ¬°Perfecto! Ahora responde este breve quiz para verificar tu comprensi√≥n:
            </p>

            <!-- Input de archivo (oculto) -->
            <input 
                type="file" 
                id="photoInput" 
                accept="image/*" 
                capture="environment"
                class="hidden"
                onchange="handlePhotoUpload(event)">

            <!-- Bot√≥n para activar input -->
            <button 
                onclick="document.getElementById('photoInput').click()" 
                class="w-full text-white font-bold text-lg py-4 px-6 rounded-2xl shadow-lg transform hover:scale-105 transition-all flex items-center justify-center gap-3" id="uploadButton" style="background:#009639">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7h4l2-2h6l2 2h4v12H3z"/></svg>
                <span>Tomar/Subir foto</span>
            </button>

            <!-- Preview de la imagen -->
            <img id="imagePreview" alt="Tu foto">

            <!-- Bot√≥n de completar (oculto inicialmente) -->
            <button 
                id="completeButton"
                onclick="completeMission()" 
                class="w-full mt-4 text-white font-bold text-lg py-4 px-6 rounded-2xl shadow-lg transform hover:scale-105 transition-all hidden"
                style="background:#009639">
                ‚úÖ Completar misi√≥n
            </button>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        function handlePhotoUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('imagePreview');
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                    
                    // Guardar imagen en localStorage (como base64)
                    localStorage.setItem('mission1Photo', e.target.result);
                    
                    // Mostrar bot√≥n de completar
                    document.getElementById('completeButton').classList.remove('hidden');
                    
                    // Cambiar texto del bot√≥n de upload
                    document.getElementById('uploadButton').innerHTML = `
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 4v6h6M20 20v-6h-6M20 9l-7 7-4-4-5 5\"/></svg>
                        <span>Cambiar foto</span>
                    `;
                };
                reader.readAsDataURL(file);
            }
        }

        function completeMission() {
            // Marcar misi√≥n como completada
            const completed = JSON.parse(localStorage.getItem('missionsCompleted') || '[]');
            if (!completed.includes('mission1')) {
                completed.push('mission1');
                localStorage.setItem('missionsCompleted', JSON.stringify(completed));
                
                // Sumar puntos
                const currentPoints = parseInt(localStorage.getItem('totalPoints') || '0');
                localStorage.setItem('totalPoints', (currentPoints + 100).toString());
                
                // Agregar insignia
                const badges = JSON.parse(localStorage.getItem('badges') || '[]');
                if (!badges.find(b => b.id === 'photographer')) {
                    badges.push({
                        id: 'photographer',
                        name: 'Fot√≥grafo',
                        icon: 'üì∏'
                    });
                    localStorage.setItem('badges', JSON.stringify(badges));
                }
            }
            
            // Redirigir a pantalla de √©xito
            window.location.href = 'success.html';
        }

        // Cargar foto si ya existe
        window.onload = function() {
            const savedPhoto = localStorage.getItem('mission1Photo');
            if (savedPhoto) {
                const preview = document.getElementById('imagePreview');
                preview.src = savedPhoto;
                preview.style.display = 'block';
                document.getElementById('completeButton').classList.remove('hidden');
                document.getElementById('uploadButton').innerHTML = `
                    <span class="text-2xl">üîÑ</span>
                    <span>Cambiar foto</span>
                `;
            }
        };
    </script>
</body>
</html>
